CREATE TABLE Usuarios (
    email_usuario VARCHAR(500) NOT NULL,
    nome_usuario VARCHAR(200) NOT NULL,
    telefone_usuario VARCHAR(15) NOT NULL,
    dt_nasc_usuario DATE NOT NULL,
    cpf_usuario VARCHAR(20) NOT NULL,
    tipo_usuario VARCHAR(50) NOT NULL,
    PRIMARY KEY (email_Usuario)
);

CREATE TABLE Plantacoes (
  cod_plantacao int(4) NOT NULL AUTO_INCREMENT,
  dt_criacao_plantacao timestamp NOT NULL DEFAULT current_timestamp(),
  email_gerente varchar(500) NOT NULL,
  PRIMARY KEY (cod_plantacao),
  FOREIGN KEY (email_gerente) REFERENCES Usuarios (email_usuario)
);

CREATE TABLE Atividades (
    cod_atividade INT(10) AUTO_INCREMENT,
    tipo_usuario VARCHAR(500),
    status_atividade VARCHAR(10),
    nome_atividade VARCHAR(10),
    cod_plantacao INT(4),
    PRIMARY KEY (cod_atividade),
    FOREIGN KEY (cod_plantacao) REFERENCES Plantacoes (cod_Plantacao)
);

CREATE TABLE Logins (
  email_usuario VARCHAR(500) NOT NULL,
  senha_usuario VARCHAR(500) NOT NULL,
  cod_plantacao int(4) NOT NULL,
  dt_admisso_usuario timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (email_Usuario),
  FOREIGN KEY (email_Usuario)  REFERENCES Usuarios(email_Usuario),
  FOREIGN KEY (cod_Plantacao) REFERENCES Plantacoes(cod_Plantacao)
);

CREATE TABLE BalancosPatrimoniais (
  cod_balanco INT(4) AUTO_INCREMENT,
  cod_plantacao INT(4) NOT NULL,
  ano_referencia VARCHAR(4) NOT NULL,
  valor_ativo FLOAT(10,2) NOT NULL,
  valor_passivo FLOAT(10,2) NOT NULL,
  patrimonio_liquido FLOAT(10,2) NOT NULL,
  capital_social FLOAT(10,2) NOT NULL,
  PRIMARY KEY (cod_balanco),
  FOREIGN KEY (cod_plantacao) REFERENCES Plantacoes(cod_plantacao)
);

CREATE TABLE Ativos (
  cod_ativo INT(4) AUTO_INCREMENT,
  cod_plantacao INT(4) NOT NULL,
  cod_balanco INT(4) NOT NULL,
  tipo_ativo VARCHAR(100) NOT NULL,
  nome_ativo VARCHAR(100) NOT NULL,
  valor_ativo FLOAT(10,2) NOT NULL,
  data_ativo DATE NOT NULL,
  PRIMARY KEY (cod_ativo),
  FOREIGN KEY (cod_plantacao) REFERENCES Plantacoes(cod_plantacao)
);

CREATE TABLE Contas (
  cod_conta INT(4) AUTO_INCREMENT,
  nome_banco VARCHAR(100) NOT NULL,
  tipo_conta VARCHAR(100) NOT NULL,
  mensalidade_conta FLOAT(10,2) NOT NULL,
  dt_atualizacao_conta timestamp NOT NULL DEFAULT current_timestamp(),
  saldo_conta FLOAT (10,2) NOT NULL,
  cod_plantacao INT(4) NOT NULL,
  status_conta TINYINT(1) NOT NULL,
  PRIMARY KEY (cod_conta),
  FOREIGN KEY (cod_plantacao) REFERENCES Plantacoes(cod_plantacao)
);

CREATE TABLE Passivos (
  cod_passivo INT(4) AUTO_INCREMENT,
  cod_plantacao INT(4) NOT NULL,
  cod_balanco INT(4) NOT NULL,
  tipo_passivo VARCHAR(100) NOT NULL,
  nome_passivo VARCHAR(100) NOT NULL,
  valor_passivo FLOAT(10,2) NOT NULL,
  data_passivo DATE NOT NULL,
  PRIMARY KEY (cod_passivo),
  FOREIGN KEY (cod_plantacao) REFERENCES Plantacoes(cod_plantacao)
);

CREATE TABLE Saidas (
  cod_saida INT(4) AUTO_INCREMENT,
  cod_plantacao int(4) NOT NULL,
  validade_saida DATE  NOT NULL,
  nome_saida VARCHAR(200) NOT NULL,
  valor_saida DECIMAL(10,2) NOT NULL,
  destino_saida VARCHAR(200) NOT NULL,
  cobranca_saida TINYINT(1) NOT NULL,
  PRIMARY KEY (cod_saida),
  FOREIGN KEY (cod_Plantacao) REFERENCES Plantacoes(cod_Plantacao)
);

CREATE TABLE Entradas (
  cod_entrada INT(4) AUTO_INCREMENT,
  cod_plantacao int(4) NOT NULL,
  validade_entrada DATE  NOT NULL,
  nome_entrada VARCHAR(200) NOT NULL,
  valor_entrada DECIMAL(10,2) NOT NULL,
  destino_valor VARCHAR(200),
  PRIMARY KEY (cod_entrada),
  FOREIGN KEY (cod_Plantacao) REFERENCES Plantacoes(cod_Plantacao)
);

CREATE TABLE FluxoCaixa (
  cod_fluxoCaixa INT(4) AUTO_INCREMENT,
  mes_referencia VARCHAR(10) NOT NULL,
  cod_plantacao INT(4) NOT NULL,
  capital_inicial FLOAT(10,2)  NOT NULL,
  saldo_operacional FLOAT(10,2)  NOT NULL,
  saldo_transportar FLOAT(10,2)  NOT NULL,
  PRIMARY KEY (cod_fluxoCaixa),
  FOREIGN KEY (cod_Plantacao) REFERENCES Plantacoes(cod_Plantacao)
);

CREATE TABLE Financiamentos (
  cod_financiamento INT(4) AUTO_INCREMENT,
  cod_plantacao INT(4) NOT NULL,
  tipo_financiamento VARCHAR(200) NOT NULL,
  valor_financiamento DECIMAL(10,2) NOT NULL,
  taxa_financiamento VARCHAR(200) NOT NULL,
  dt_financiamento DATE NOT NULL,
  dt_finalizado DATE NOT NULL,
  tipo_carencia VARCHAR(100) NOT NULL,
  tipo_quitacao VARCHAR(100) NOT NULL,
  tempo_carencia int(100) NOT NULL,
  tempo_quitacao int(100) NOT NULL,
  email_usuario VARCHAR(500) NOT NULL,
  PRIMARY KEY (cod_financiamento),
  FOREIGN KEY (cod_plantacao)  REFERENCES Plantacoes(cod_plantacao),
  FOREIGN KEY (email_usuario) REFERENCES Usuarios(email_usuario)
);

CREATE TABLE Fornecedores (
  cod_fornecedor int(4) NOT NULL AUTO_INCREMENT,
  nome_fornecedor varchar(200) NOT NULL,
  doc_fornecedor varchar(20) NOT NULL,
  telefone_fornecedor varchar(15) NOT NULL,
  cep_fornecedor varchar(10) NOT NULL,
  email_fornecedor varchar(500) NOT NULL,
  PRIMARY KEY (cod_fornecedor)
);

CREATE TABLE Insumos (
  cod_insumo int(4) NOT NULL AUTO_INCREMENT,
  nome_insumo varchar(200) NOT NULL,
  tipo_insumo varchar(200) NOT NULL,
  PRIMARY KEY (cod_insumo)
);

CREATE TABLE Fornecedores_Produtos (
  cod_produto int(4) NOT NULL,
  cod_fornecedor int(4) NOT NULL,
  cod_plantacao INT(4) NOT NULL,
  dia_entrega int(4) NOT NULL,
  qualidade_produto int(4) NOT NULL,
  contagem_produto int(4) NOT NULL,
  PRIMARY KEY (cod_fornecedor, cod_produto),
  FOREIGN KEY (cod_fornecedor) REFERENCES Fornecedores (cod_fornecedor),
  FOREIGN KEY (cod_plantacao) REFERENCES Plantacoes (cod_plantacao)
);

-------------------------------
CREATE TABLE Hortalicas (
  cod_hortalica int(4) NOT NULL AUTO_INCREMENT,
  nome_hortalica varchar(200) NOT NULL,
  cod_insumo int(4) NOT NULL,
  PRIMARY KEY (cod_hortalica),
  FOREIGN KEY (cod_insumo) REFERENCES Insumos (cod_insumo)
);

CREATE TABLE Ferramentas (
  cod_ferramenta int(4) NOT NULL AUTO_INCREMENT,
  nome_ferramenta varchar(200) NOT NULL,
  caracteristica_ferramenta varchar(200) NOT NULL,
  PRIMARY KEY (cod_ferramenta)
);

CREATE TABLE Pedidos_Compra (
  cod_Pedido_Compra INT(4) AUTO_INCREMENT,
  dt_Pedido_Compra timestamp NOT NULL DEFAULT current_timestamp(),
  total_Compra DECIMAL(10,2) NOT NULL,
  cod_Plantacao INT(4) NOT NULL,
  email_Usuario_Comprou VARCHAR(500) NOT NULL,
  cod_Fornecedor INT(4) NOT NULL,
  status_Pedido VARCHAR(10) NOT NULL,
  PRIMARY KEY (cod_Pedido_Compra),
  FOREIGN KEY (cod_Plantacao) REFERENCES Plantacoes(cod_Plantacao),
  FOREIGN KEY (email_Usuario_Comprou) REFERENCES Usuarios(email_Usuario),
  FOREIGN KEY (cod_Fornecedor) REFERENCES Fornecedores_Insumos(cod_Fornecedor)
);

CREATE TABLE Itens_Compra (
  cod_Item_Compra INT(4) AUTO_INCREMENT,
  quant_Total_Insumo INT(10) NOT NULL,
  cod_Pedido_Compra INT(4) NOT NULL,
  cod_Insumo int(4) NOT NULL,
  valor_Item DECIMAL(10,2) NOT NULL,
  PRIMARY KEY (cod_Item_Compra),
  FOREIGN KEY (cod_Pedido_Compra) REFERENCES Pedidos_Compra(cod_Pedido_Compra),
  FOREIGN KEY (cod_Insumo) REFERENCES Fornecedores_Insumos(cod_Insumo)
);


------------------------------------------PAREI--------------------------------------------

CREATE TABLE Celeiros (
  cod_posicao_celeiro int(4) AUTO_INCREMENT,
  cod_Insumo int(4) NOT NULL,
  cod_Fornecedor int(4) NOT NULL,
  cod_Plantacao int(4) NOT NULL,
  quant_Insumo decimal(10,2) NOT NULL,
  PRIMARY KEY (cod_posicao_celeiro, cod_Insumo,cod_Fornecedor, cod_Plantacao),
  FOREIGN KEY (cod_Insumo) REFERENCES Fornecedores_Insumos (cod_Insumo),
  FOREIGN KEY (cod_Fornecedor) REFERENCES Fornecedores_Insumos (cod_Fornecedor),
  FOREIGN KEY (cod_Plantacao) REFERENCES Plantacoes (cod_Plantacao)
);


CREATE TABLE Plantio (
    cod_Plantacao_Hortalica INT(10) AUTO_INCREMENT,
    cod_Plantacao INT(4) not null,
    cod_Insumo INT(4) not null,
    cod_Fornecedor INT(4) not null,
    quant_Plantada INT(10) not null,
    dt_Plantio timestamp NOT NULL DEFAULT current_timestamp(),
    email_Usuario_Plantou VARCHAR(500) NOT NULL,
    status_Plantio VARCHAR(10) not null,
    tipo_Plantio VARCHAR(10) not null,  
    PRIMARY KEY (cod_Plantacao_Hortalica),
    FOREIGN KEY (cod_Plantacao) REFERENCES Plantacoes(cod_Plantacao),
    FOREIGN KEY (cod_Insumo) REFERENCES Insumos(cod_Insumo),
    FOREIGN KEY (cod_Fornecedor) REFERENCES Fornecedores(cod_Fornecedor),
    FOREIGN KEY (email_Usuario_Plantou) REFERENCES Usuarios(email_Usuario)
);

CREATE TABLE Armazens (
  cod_Posicao_Armazem int(4) AUTO_INCREMENT,
  cod_Hortalica INT(4) NOT NULL,
  cod_Fornecedor INT(4) NOT NULL,
  cod_Plantacao INT(4) NOT NULL,
  quant_Restante_Hortalica DECIMAL(10,2) not null,
  valor_Hortalica DECIMAL(10,2) not null,
  PRIMARY KEY (cod_Posicao_Armazem, cod_Hortalica, cod_Fornecedor, cod_Plantacao),
  FOREIGN KEY (cod_Hortalica) REFERENCES Hortalicas(cod_Hortalica),
  FOREIGN KEY (cod_Fornecedor) REFERENCES Fornecedores(cod_Fornecedor),
  FOREIGN KEY (cod_Plantacao) REFERENCES Plantacoes(cod_Plantacao)
);

CREATE TABLE Colheita (
    cod_Plantacao_Hortalica INT(10),
    cod_Posicao_Armazem int(4) NOT NULL,
    quant_Total_Colida decimal(10,2) not null,
    dt_Colheita timestamp NOT NULL DEFAULT current_timestamp(),
    email_Usuario_Colheu VARCHAR(500) NOT NULL,
    PRIMARY KEY (cod_Plantacao_Hortalica),
    FOREIGN KEY (cod_Plantacao_Hortalica) REFERENCES Plantio(cod_Plantacao_Hortalica),
    FOREIGN KEY (email_Usuario_Colheu) REFERENCES Usuarios(email_Usuario),
    FOREIGN KEY (cod_Posicao_Armazem) REFERENCES Armazens(cod_Posicao_Armazem)
);


CREATE TABLE Clientes (
  cod_Cliente int(4) NOT NULL AUTO_INCREMENT,
  nome_Cliente varchar(200) NOT NULL,
  email_Cliente varchar(500) NOT NULL,
  telefone_Cliente varchar(15) NOT NULL,
  cep_Cliente varchar(10) NOT NULL,
  doc_Cliente varchar(20) NOT NULL,
  cod_Plantacao int(4) NOT NULL,
  PRIMARY KEY (cod_Cliente),
  FOREIGN KEY (cod_Plantacao) REFERENCES Plantacoes(cod_Plantacao)
);

CREATE TABLE Pedidos_Venda (
  cod_Pedido_Venda INT(4) AUTO_INCREMENT,
  dt_Pedido_Venda timestamp NOT NULL DEFAULT current_timestamp(),
  total_Venda DECIMAL(10,2) NOT NULL,
  cod_Cliente INT(4) NOT NULL,
  email_Usuario_Vendeu VARCHAR(500) NOT NULL,
  cod_Plantacao INT(4) not null,
  PRIMARY KEY (cod_Pedido_Venda),
  FOREIGN KEY (cod_Plantacao) REFERENCES Plantacoes(cod_Plantacao),
  FOREIGN KEY (cod_Cliente) REFERENCES Clientes(cod_Cliente),
  FOREIGN KEY (email_Usuario_Vendeu) REFERENCES Usuarios(email_Usuario)
);

CREATE TABLE Itens_Venda (
  cod_Item_Venda INT(4) AUTO_INCREMENT,
  cod_Pedido_Venda INT(4) not null,
  quant_vendida INT(5) NOT NULL,
  cod_Posicao_Armazem int(4) not null,
  cod_Hortalica INT(4) NOT NULL,
  cod_Plantacao INT(10) NOT NULL,
  PRIMARY KEY (cod_Item_Venda),
  FOREIGN KEY (cod_Pedido_Venda) REFERENCES Pedidos_Venda(cod_Pedido_Venda),
  FOREIGN KEY (cod_Hortalica) REFERENCES Hortalicas(cod_Hortalica),
  FOREIGN KEY (cod_Posicao_Armazem) REFERENCES Armazens(cod_Posicao_Armazem)
);


CREATE TABLE  (
  cod_Item_Venda INT(4) AUTO_INCREMENT,
  cod_Pedido_Venda INT(4) not null,
  quant_vendida INT(5) NOT NULL,
  cod_Posicao_Armazem int(4) not null,
  cod_Hortalica INT(4) NOT NULL,
  cod_Plantacao INT(10) NOT NULL,
  PRIMARY KEY (cod_Item_Venda),
  FOREIGN KEY (cod_Pedido_Venda) REFERENCES Pedidos_Venda(cod_Pedido_Venda),
  FOREIGN KEY (cod_Hortalica) REFERENCES Hortalicas(cod_Hortalica),
  FOREIGN KEY (cod_Posicao_Armazem) REFERENCES Armazens(cod_Posicao_Armazem)
);